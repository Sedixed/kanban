(self.webpackChunk=self.webpackChunk||[]).push([[143],{4180:(e,t,n)=>{var a={"./index.js":9721};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=4180},8205:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a={}},9721:()=>{},1882:(e,t,n)=>{"use strict";n.r(t),n.d(t,{app:()=>a});var a=(0,n(8360).x)(n(4180))},3664:(e,t,n)=>{"use strict";n(1688),n(8066),n(1136),n(7170),n(6140),n(7375),n(1765),n(7796),n(7254),n(1882),n(7145),n(2652),n(7950),n(6775),n(4681),n(5556),n(9957),n(7119),n(1231),n(2465)},7950:(e,t)=>{"use strict";t.__esModule=!0,t.createXhrObject=void 0,t.createXhrObject=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var t in e)try{return new ActiveXObject(e[t])}catch(e){}}return null}},9957:(e,t,n)=>{"use strict";n(8862),t.__esModule=!0;var a=n(7950),r=document.querySelectorAll(".js-invitation"),c=(0,a.createXhrObject)();function s(e,t){var n=e.currentTarget.dataset.invitationId;c.onreadystatechange=function(){!function(e){if(4==c.readyState)if(200==c.status)document.querySelector("div[data-invitation-id='"+e+"']").remove();else{var t=document.querySelector(".failure-flash");null!=t&&t.remove();var n=document.createElement("div");n.setAttribute("class","failure-flash");var a=document.createTextNode(c.getResponseHeader("X-Error-Message"));n.appendChild(a),document.querySelector("h1").after(n)}}(n)},c.open("POST","/invitation/"+t,!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest");var a={id:n};c.send(JSON.stringify(a))}for(var o=0;o<r.length;++o){var i=r[o].querySelector(".js-accept"),l=r[o].querySelector(".js-reject");i.addEventListener("click",(function(e){return s(e,"accept")})),l.addEventListener("click",(function(e){return s(e,"reject")}))}},6775:(e,t,n)=>{n(4916),n(5306);var a=function(e){var t=document.createElement("button");t.classList.add("delete-column");var n=document.createTextNode("Supprimer");t.appendChild(n),e.querySelector(".js-input-container").append(t),t.addEventListener("click",(function(t){t.preventDefault(),e.remove()}))},r=document.querySelector(".js-add-item");null!=r&&r.addEventListener("click",(function(){var e=document.querySelector("form .columns"),t=e.querySelector(".js-last-column"),n=document.createElement("li"),r=document.createElement("div");r.classList.add("input-container"),r.classList.add("js-input-container"),r.classList.add("added-column"),n.appendChild(r),r.innerHTML=e.dataset.prototype.replace(/__name__/g,e.dataset.index),n.querySelector("input").setAttribute("placeholder","Nouvelle colonne"),e.insertBefore(n,t),e.dataset.index+=1,a(n)}))},4681:(e,t,n)=>{"use strict";n(7042),t.__esModule=!0;var a=n(7145),r=document.querySelectorAll(".js-sort-options"),c=document.querySelectorAll(".js-kanbans-created .kanban"),s=Array.prototype.slice.call(c,0),o=document.querySelectorAll(".js-kanbans-invited .kanban"),i=Array.prototype.slice.call(o,0);r.length>0&&(c.length>0&&(0,a.bind_events)(r[0],c[0].parentElement,s),o.length>0&&(0,a.bind_events)(r[1],o[0].parentElement,i))},5556:(e,t,n)=>{"use strict";n(9554),n(1539),n(4747),t.__esModule=!0;var a=n(2652);document.querySelectorAll(".js-task").forEach((function(e){e.addEventListener("click",(function(t){var n,r;t.target instanceof HTMLAnchorElement||(0,a.createTaskPopup)(+e.dataset.taskId,e.dataset.taskName,e.dataset.taskDescription,null!==(n=e.dataset.taskUser)&&void 0!==n?n:null,null!==(r=e.dataset.taskDate)&&void 0!==r?r:null)}))}))},2652:(e,t,n)=>{"use strict";n(8309),n(4916),n(5306),n(3210),n(6647),n(3710),n(1539),n(9714),t.__esModule=!0,t.createTaskPopup=t.createNewTaskPopup=void 0;var a=n(7119);function r(e,t){void 0===t&&(t="Annuler");var n=document.createElement("div");n.classList.add("js-popup-background"),n.classList.add("popup-background"),document.body.appendChild(n);var a=document.createElement("div");a.classList.add("popup");var r=document.createElement("div");r.classList.add("popup-relative"),a.appendChild(r);var c=document.createElement("button");c.classList.add("popup-exit"),c.addEventListener("click",(function(){a.remove(),n.remove()}));var s=document.createTextNode(t);c.append(s),r.append(e),r.append(c),document.getElementsByTagName("body")[0].append(a)}function c(e,t,n){var a=document.createElement("div");a.classList.add("input-container"),a.classList.add("form-element-bigger-container");var r=document.createElement("input");r.name=n,r.type=e,"text"===e&&(r.required=!0,r.minLength=3,r.maxLength=255),r.placeholder="";var c=document.createElement("label");return c.textContent=t,a.appendChild(r),a.appendChild(c),a}t.createNewTaskPopup=function(e){r(function(e){var t=document.createElement("form");t.action=e,t.method="POST",t.style.margin="0px";var n=c("text","Nom","name"),a=document.createElement("div");a.classList.add("textarea-container"),a.classList.add("form-element-bigger-container");var r=document.createElement("textarea");r.name="description",r.required=!0,r.minLength=3,r.maxLength=500,r.placeholder="Description",a.appendChild(r);var s=c("date","Date limite (optionnelle)","limitDate"),o=document.createElement("button");return o.textContent="Ajouter une tâche",t.appendChild(n),t.appendChild(a),t.appendChild(s),t.appendChild(o),t}("/task/create_under/"+e))},t.createTaskPopup=function(e,t,n,c,s){void 0===c&&(c=null),void 0===s&&(s=null);var o=document.createElement("div");o.classList.add("task-popup"),o.dataset.taskId=e.toString();var i=document.createElement("h2");if(i.textContent=t,o.appendChild(i),null!=s){var l=document.createElement("span");l.classList.add("limite-date"),l.textContent="Date limite : "+new Date(s).toLocaleDateString(),o.appendChild(l)}if(null!=c){var d=document.createElement("h3");d.textContent="Tâche assignée à : "+c,o.appendChild(d)}var u=document.createElement("p");u.innerHTML=n.replace(/(\*\*)(.*?)(\*\*)/gim,'<span class="bold">$2</span>').replace(/(\*)(.*?)(\*)/gim,'<span class="italic">$2</span>').replace(/(__)(.*?)(__)/gim,'<span class="underline">$2</span>').replace(/(~~)(.*?)(~~)/gim,'<span class="deleted">$2</span>').trim(),o.appendChild(u);var p=document.querySelector('.js-task-affect[data-task-id="'.concat(e,'"]'));if(null!==p){var m=p.cloneNode(!0);(0,a.bindAffects)(m),o.appendChild(m)}r(o,"Fermer")}},7145:(e,t,n)=>{"use strict";n(3710),n(9554),n(1539),n(4747),n(2707),t.__esModule=!0,t.bind_events=void 0;var a=function(e,t){var n=e.querySelector(".js-alpha-key").textContent,a=t.querySelector(".js-alpha-key").textContent;return n.localeCompare(a)},r=function(e,t){var n=e.querySelector(".js-alpha-dec-key").textContent;return t.querySelector(".js-alpha-dec-key").textContent.localeCompare(n)},c=function(e,t){var n=e.querySelector(".js-date-key"),a=t.querySelector(".js-date-key");if(null==n)return 1;if(null==a)return-1;var r=n.textContent.split("/"),c=a.textContent.split("/"),s=new Date(+r[2],+r[1]-1,+r[0]),o=new Date(+c[2],+c[1]-1,+c[0]);return s.getTime()-o.getTime()},s=function(e,t){var n=e.querySelector(".js-date-dec-key"),a=t.querySelector(".js-date-dec-key");if(null==n)return 1;if(null==a)return-1;var r=n.textContent.split("/"),c=a.textContent.split("/"),s=new Date(+r[2],+r[1]-1,+r[0]);return new Date(+c[2],+c[1]-1,+c[0]).getTime()-s.getTime()},o=function(e,t){for(var n=0;n<e.children.length;n++)e.children[n].remove();for(n=0;n<t.length;++n)e.appendChild(t[n])};t.bind_events=function(e,t,n){var i=e.querySelector(".js-alpha"),l=e.querySelector(".js-alpha-dec"),d=e.querySelector(".js-date"),u=e.querySelector(".js-date-dec"),p=e.querySelector(".kanban-sort");null!=i&&i.addEventListener("click",(function(){n.sort(a),o(t,n)})),null!=l&&l.addEventListener("click",(function(){n.sort(r),o(t,n)})),null!=d&&d.addEventListener("click",(function(){n.sort(c),o(t,n)})),null!=u&&u.addEventListener("click",(function(){n.sort(s),o(t,n)})),null!=p&&n instanceof Array&&p.addEventListener("change",(function(e){var t=+e.target.value;t<0?function(e){e.forEach((function(e){e.classList.remove("invisible")}))}(n):function(e,t){e.forEach((function(e){+e.dataset.kanbanId!==t?e.classList.add("invisible"):e.classList.remove("invisible")}))}(n,t)}))}},2465:(e,t,n)=>{"use strict";n(9554),n(1539),n(4747),t.__esModule=!0;var a=n(2652);document.querySelectorAll(".add-task button").forEach((function(e){e.addEventListener("click",(function(){(0,a.createNewTaskPopup)(+e.dataset.colId)}))}))},7119:(e,t,n)=>{"use strict";n(8309),n(9554),n(1539),n(4747),n(8862),t.__esModule=!0,t.bindAffects=void 0;var a=(0,n(7950).createXhrObject)();function r(e,t){var n=e.currentTarget,r=n.dataset.taskId;a.onreadystatechange=function(){!function(e,t){if(4==a.readyState)if(200==a.status){var n=JSON.parse(a.responseText).name,r=document.querySelector(".task-popup[data-task-id='"+e+"']").querySelector("h2"),c=document.createElement("h3");c.textContent="Tâche affectée à : "+n,r.after(c),document.querySelector(".js-task[data-task-id='"+e+"']").dataset.taskUser=n,document.querySelectorAll(".js-task-affect[data-task-id='"+e+"'] .task-actions").forEach((function(e){e.remove()}))}else{var s=document.querySelector(".failure-flash");null!=s&&s.remove();var o=document.createElement("div");o.setAttribute("class","failure-flash");var i=document.createTextNode(a.getResponseHeader("X-Error-Message"));o.appendChild(i),document.querySelector(".js-task-affect[data-task-id='"+e+"']").after(o)}}(r)},a.open("POST","/task/"+t,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest");var c={taskId:r};if("affect"===t){var s=n.parentNode.querySelector("select");c.userId=s.value}a.send(JSON.stringify(c))}t.bindAffects=function(e){var t=e.querySelector(".js-accept"),n=e.querySelector(".js-affect");null!=t&&t.addEventListener("click",(function(e){return r(e,"accept")})),null!=n&&n.addEventListener("click",(function(e){return r(e,"affect")}))}},1231:(e,t,n)=>{"use strict";n(7042),t.__esModule=!0;var a=n(7145),r=document.querySelectorAll(".js-sort-options"),c=document.querySelectorAll(".tasks .task"),s=Array.prototype.slice.call(c,0);r.length>0&&s.length>0&&(0,a.bind_events)(r[0],s[0].parentElement,s)},1688:(e,t,n)=>{"use strict";n.r(t)},8066:(e,t,n)=>{"use strict";n.r(t)},1136:(e,t,n)=>{"use strict";n.r(t)},7170:(e,t,n)=>{"use strict";n.r(t)},7254:(e,t,n)=>{"use strict";n.r(t)},7375:(e,t,n)=>{"use strict";n.r(t)},6140:(e,t,n)=>{"use strict";n.r(t)},1765:(e,t,n)=>{"use strict";n.r(t)},7796:(e,t,n)=>{"use strict";n.r(t)}},e=>{e.O(0,[719],(()=>{return t=3664,e(e.s=t);var t}));e.O()}]);